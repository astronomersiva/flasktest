---
title: Generating Open Graph images on-the-fly
date: August 23, 2021
description: How this site generates Open Graph images with Vercel for its contents.
tags: Open Graph, Serverless
order: 50
relatedPosts: 47
---

This site is built using [lego](/lego), a static site generator. It used a single
image for all pages in this site as the `og:image`.

::: lazy-image src="/static/images/lowres/og-image.png" alt="Text that says 'Hello World!', Personal site of Sivasubramanyam A" classNames="nobleed" :::

I decided to change this image for each post so that there is some additional context
in the social media previews when a link is shared. While generating these images
during build time using [Puppeteer](https://github.com/puppeteer/puppeteer/)
was an option, that would lead to a significant increase in the build time. Running
this on Netlify, my current hosting provider, would not be economical.

[GitHub's approach](https://github.blog/2021-06-22-framework-building-open-graph-images/)
to `og:image` generation for links seemed like a great idea. I came across Vercel's
[Open Graph Image as a Service](https://og-image.vercel.app/) while reading their blog
and I decided to combine both of them for the sake of this site.

I [forked](https://github.com/astronomersiva/og-image) Vercel's repo and removed
all the unnecessary code(mostly UI related). After this, I added
[GitHub's performance improvements](https://github.blog/2021-06-22-framework-building-open-graph-images/#some-performance-gotchas)
to Vercel's logic and that was it.

Here's an example of an image output generated by this service:

<img src="https://og.siva.dev/Generating%20Open%20Graph%20images%20on-the-fly.png?desc=How%20this%20site%20generates%20Open%20Graph%20images%20with%20Vercel%20for%20its%20contents.&link=og-images" class="img-responsive center-block">
